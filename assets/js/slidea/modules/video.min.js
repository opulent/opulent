(function(){!function(e,t,a){"use strict";return e.fn.slidea.video=function(){this.settings=!0,this.initialize=function(){var t,a,i,d;return this.video_timeline={},t=500,i=void 0,a=0,d=10,e(".slidea-video-background").each(function(t,a){e(a).hasClass("slidea-object")||e(a).addClass("slidea-object")}),e("video.slidea-video",this.element).attr("data-slidea-video-type","html5"),e('iframe[data-slidea-src*="youtube.com"].slidea-video',this.element).attr("data-slidea-video-type","youtube"),e('iframe[data-slidea-src*="vimeo.com"].slidea-video',this.element).attr("data-slidea-video-type","vimeo"),e(this.settings.selector.video,this.element).each(function(a){return function(r,n){var s,o,l,u,c,p,v,y,m;p=e(n),m=p.attr("data-slidea-volume"),m=isNaN(m)?0:m,s="true"===p.attr("data-slidea-controls"),l="true"===p.attr("data-slidea-pause-slider"),c=p.attr("data-slidea-src"),y=p.attr("data-slidea-video-type"),null==p.attr("id")&&p.attr("id",a.get_random_id("slidea-video")),o=p.attr("id"),"html5"===y&&(p.get(0).volume=m,s===!0&&p.attr("controls","controls"),a.settings.autoplay===!0&&l===!0&&(p.on("play",function(){a.pause_timer()}),p.on("pause ended",function(){a.unpause_timer()}))),"youtube"===y&&(v=void 0,u=void 0,-1===c.indexOf("enablejsapi=1")&&(-1===c.indexOf("?")?p.attr("src",c+"?enablejsapi=1"):p.attr("src",c+"&enablejsapi=1"),c=p.attr("src")),-1===c.indexOf("playerapiid=")&&(-1===c.indexOf("?")?p.attr("src",c+"?playerapiid="+o):p.attr("src",c+"&playerapiid="+o),c=p.attr("src")),"-1"===c.indexOf("embed")?(v=c.split("v=")[1],u=v.indexOf("&"),-1!==u&&(v=v.substring(0,u))):(v=c.split("/"),v=v[v.length-1],u=v.indexOf("?"),-1!==u&&(v=v.substring(0,u))),p.load(function(){a.youtube_player[o]=new YT.Player(o,{height:"720",width:"1280",video_id:v,events:{onStateChange:function(e){1===e.data&&a.pause_timer(),2!==e.data&&0!==e.data||a.unpause_timer()}}}),r=0,i=setInterval(function(){if(r++,r===d)clearInterval(i);else{if(null==a.youtube_player[o]||"function"!=typeof a.youtube_player[o].setVolume)return;clearInterval(i)}a.youtube_player[o].setVolume(m)},t)})),"vimeo"===y&&(-1===c.indexOf("api=1")&&(-1===c.indexOf("?")?p.attr("src",c+"?api=1"):p.attr("src",c+"&api=1"),c=p.attr("src")),-1===c.indexOf("player_id=")&&(-1===c.indexOf("?")?p.attr("src",c+"?player_id="+o):p.attr("src",c+"&player_id="+o),c=p.attr("src")),p.load(function(){a.vimeo_player[o]=$f(o),a.vimeo_player[o].addEvent("ready",function(){p.attr("data-slidea-ready","true"),a.vimeo_player[o].api("setVolume",m),a.settings.autoplay===!0&&l===!0&&(a.vimeo_player[o].addEvent("play",a.pause_timer),a.vimeo_player[o].addEvent("pause",a.unpause_timer),a.vimeo_player[o].addEvent("finish",a.unpause_timer))})}))}}(this))},this.slide=function(t,a){var i,d,r,n;i=this.slides.eq(t),r=this.slides.eq(a),d=e(this.settings.selector.video,i),n=e(this.settings.selector.video,r),-1!==t&&d.length>0&&(d.each(function(t){return function(i,d){var r,n,s;d=e(d),r=d.attr("id"),s=d.attr("data-slidea-video-type"),n="true"===d.attr("data-slidea-reset"),clearTimeout(t.video_timeline[r]),"html5"===s?(d.get(0).pause(),n&&setTimeout(function(){d.get(0).current_time=0},t.data[a].background[0].animation[0].duration)):"youtube"===s?(t.youtube_player[r].pauseVideo(),n&&setTimeout(function(){t.youtube_player[r].stopVideo()},t.data[a].background[0].animation[0].duration)):"vimeo"===s&&(t.vimeo_player[r].api("pause"),n&&setTimeout(function(){t.vimeo_player[r].api("unload")},t.data[a].background[0].animation[0].duration))}}(this)),this.log("Paused (handled) videos from slide "+t+".")),n.length>0&&(n.each(function(t){return function(a,i){var d,r,n,s,o,l,u,c;i=e(i),o=i.attr("id"),s=0,c=10,n=500,l=void 0,d="true"===i.attr("data-slidea-autoplay"),r=null!=i.attr("data-slidea-autoplay-time")?parseInt(i.attr("data-slidea-autoplay-time"),10):100,u="true"===i.attr("data-slidea-pause-slider"),"html5"===i.attr("data-slidea-video-type")&&d===!0&&(t.video_timeline[o]=setTimeout(function(){i.get(0).play()},r)),"youtube"===i.attr("data-slidea-video-type")&&d===!0&&(s=0,l=setInterval(function(){if(s++,s===c)clearInterval(l);else{if(null==i.attr("data-slidea-ready")||!defined(t.youtube_player[o])||"function"!=typeof t.youtube_player[o].playVideo)return;clearInterval(l)}t.video_timeline[o]=setTimeout(function(){t.youtube_player[o].playVideo()},r)},n)),"vimeo"===i.attr("data-slidea-video-type")&&d===!0&&(s=0,l=setInterval(function(){if(s++,s===c)clearInterval(l);else{if(null==i.attr("data-slidea-ready")||"function"!=typeof t.vimeo_player[o].api)return;clearInterval(l)}t.video_timeline[o]=setTimeout(function(){Froogaloop(o).api("play")},r)},n))}}(this)),this.log("Played (handled) videos from slide "+a+"."))},this.resize=function(){this.slides.each(function(t){return function(a,i){var d,r,n,s,o,l,u,c,p;o=e(i),e(t.settings.selector.video,t.element).each(function(t,a){var i,d,r;a=e(a),d=a.parent(),d.is(".slidea-video-background")||(i=d.height(),r=d.width(),a.css({width:r,height:i}))}),u=e(".slidea-video-background",o),u.length>0&&(l=e(".video",u),r=parseInt(l.attr("data-slidea-width")),d=parseInt(l.attr("data-slidea-height")),p=t.slider_width,c=p*d/r,n=-(p-t.slider_width)/2,s=-(c-t.slider_height)/2,l.css({width:p,height:c,"margin-left":n,"margin-top":s}))}}(this))}},e.slidea.register_module("video",e.fn.slidea.video)}(window.jQuery,window,document)}).call(this);