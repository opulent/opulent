{"version":3,"sources":["application0/form.coffee"],"names":[],"mappings":"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","file":"application0/form.js","sourceRoot":"/source/","sourcesContent":["(($, window, document) ->\n  \"use strict\"\n\n  # @Navbar\n  $.form = (element, options) ->\n    @settings = {}\n    @settings.maxMessages = 2\n\n    @messages_sent = 0\n\n    @form = $(element)\n    @groups = $('.form-group', @form)\n    @inputs = $('input, textarea', @form)\n    @check = {}\n\n    @action = @form.attr 'action'\n    @method = @form.attr 'method'\n    @method = 'POST' unless @method?\n\n    @send_button = $('.send-button')\n\n    @success_message = $('.contact-success', @form)\n    @show_success = =>\n      @send_button.removeClass 'sending'\n      @success_message.addClass 'active'\n      setTimeout =>\n        @success_message.removeClass 'active'\n        return\n      , 5000\n      return\n\n    @error_message = $('.contact-error', @form)\n    @show_error = =>\n      @send_button.removeClass 'sending'\n      @error_message.addClass 'active'\n      setTimeout =>\n        @error_message.removeClass 'active'\n        return\n      , 5000\n      return\n\n    # Captcha fields\n    $('[data-validate-captcha]', @form).each (index, input) =>\n      input = $(input)\n      parent = input.parent()\n      label = $('label', parent)\n\n      min = 1\n      max = 10\n      random1 = Math.floor(Math.random() * (max - min + 1)) + min\n      random2 = Math.floor(Math.random() * (max - min + 1)) + min\n\n      captcha = random1 + random2\n\n      input.data 'captcha', captcha\n      label.text \"#{random1} + #{random2} = ?\"\n      return\n\n    # Focus Animation\n    @groups.each (index, group) =>\n      group = $(group)\n      input = $('input, textarea', group)\n      label = $('label', group)\n\n      group.on 'click', =>\n        input.focus()\n        return\n\n      if input.val() != \"\"\n        label.addClass 'active'\n\n      input.on 'focusin', =>\n        group.removeClass 'has-error'\n        label.addClass 'active'\n        return\n\n      input.on 'focusout', =>\n        if input.val() == \"\"\n          label.removeClass 'active'\n        return\n      return\n\n    ###\n    Validate all inputs by validation type\n    ###\n    @validate = =>\n      valid = true\n      @inputs.each (index, input) =>\n        input_valid = true\n        input = $(input)\n        value = input.val()\n        $.each @check, (method) =>\n          input_valid &&= @check[method](input, value)\n          input.parent().addClass 'has-error' unless input_valid\n          return\n        valid &&= input_valid\n        return\n      return valid\n\n    ###\n    Get validate attribute\n    ###\n    @get_attr = (input, data, fallback) =>\n      attr = input.attr \"data-validate-#{data}\"\n      if attr?\n        return attr\n      else if fallback?\n        return fallback\n\n    ###\n    Validate Email\n    ###\n    @check['email'] = (input, value) =>\n      attr = @get_attr input, 'email'\n      return true unless attr?\n      return /[A-Z0-9._%+-]+\\@[A-Z0-9.-]+\\.[A-Z]+/i.test value\n\n    ###\n    Validate Minimum Length\n    ###\n    @check['min-length'] = (input, value) =>\n      attr = @get_attr input, 'min-length'\n      return true unless attr?\n      return value.length > parseInt(attr)\n\n    ###\n    Validate Maximum Length\n    ###\n    @check['max-length'] = (input, value) =>\n      attr = @get_attr input, 'max-length'\n      return true unless attr?\n      return value.length < parseInt(attr)\n\n    ###\n    Validate Required\n    ###\n    @check['required'] = (input, value) =>\n      attr = @get_attr input, 'required'\n      return true unless attr?\n      return value != ''\n\n    ###\n    Validate Captcha\n    ###\n    @check['captcha'] = (input, value) =>\n      attr = @get_attr input, 'captcha'\n      return true unless attr?\n      return /[0-9]+/.test(value) and parseInt(value) == input.data('captcha')\n\n    # Form submit check\n    @form.submit (e) =>\n      valid = @validate()\n\n      if valid and not @send_button.hasClass('sending')\n        @messages_sent += 1\n\n        if @messages_sent > @settings.maxMessages\n          alert \"You have already sent #{@settings.maxMessages} messages.\"\n        else\n          @send_button.addClass 'sending'\n\n          ajax = {}\n          ajax['url'] = @action if @action?\n          ajax['type'] = @method\n          ajax['data'] = @form.serialize()\n          ajax['success'] = =>\n            @show_success()\n            return\n          ajax['error'] = (e) =>\n            console.error e\n            @show_error()\n            return\n          $.ajax ajax\n\n      e.preventDefault()\n      return false\n\n    return\n\n  # Lightweight plugin wrapper that prevents multiple instantiations.\n  #\n  $.fn.form = (opts) ->\n    @each (index, element) ->\n      unless $.data element, \"form\"\n        $.data element, \"form\", new $.form element, opts\n\n) window.jQuery, window, document\n"]}