{"version":3,"sources":["dashboard/components/image-viewer.coffee"],"names":[],"mappings":"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","file":"dashboard/components/image-viewer.js","sourceRoot":"/source/","sourcesContent":["$(document).ready ->\n  markdown_raw = $('textarea.markdown-raw')\n  markdown_content = $('textarea#markdown-content')\n  markdown_preview = $('.markdown-preview')\n  markdown_preview_nano = $('.nano', markdown_preview)\n  markdown_preview_content = $('.nano-content', markdown_preview)\n\n  if markdown_raw.length > 0\n    editor = CodeMirror.fromTextArea markdown_raw[0],\n      lineNumbers: true\n      lineWrapping: true\n      mode: \"markdown\"\n\n    update_editor = ->\n      editor.save()\n      compiled_markdown = marked markdown_raw.val()\n      markdown_preview.height $('.CodeMirror').height()\n      markdown_content.html compiled_markdown\n      markdown_preview_content.html compiled_markdown\n      markdown_preview_nano.nanoScroller()\n      return\n    update_editor()\n\n    editor.on \"changes\", (cm) ->\n      update_editor()\n\n    # Toggle editor full width\n    $('#toggle-editor-full-width').on 'click', (e) ->\n      $('#markdown-forms .col').toggleClass('col-md-6').toggleClass('col-md-12')\n      return\n\n    # Toggle checkbox child\n    $('.toggle-child-checkbox').on 'click', (e) ->\n      $(e.target).find('input').click()\n      return\n\n  image_viewer_context = null\n\n  hide_image_viewer = ->\n    $('.image-viewer').removeClass 'open'\n    image_viewer_context = null\n    return\n\n  $('.image-viewer').on 'click', (e) ->\n    hide_image_viewer() if $(e.target).is $('.image-viewer')\n    return\n\n  show_image_viewer = ->\n    $('.image-viewer').addClass 'open'\n    return\n\n  $('.image-viewer').on 'click', '.image-viewer-item-insert', (e) ->\n    item = $(e.target).closest '.image-viewer-item'\n    id = item.attr 'data-image-id'\n    url = item.attr 'data-image-original'\n\n    switch image_viewer_context\n      when 'markdown'\n        editor.replaceSelection '![Pixevil](' + url + ' \"Pixevil\")'\n      when 'post-image'\n        $('#set-post-image').html \"<img class='img-responsive' src='#{url}'>\"\n        $('#post-image').val id\n      when 'dashboard'\n        window.location = url\n\n    hide_image_viewer()\n\n    return\n\n  $('.image-viewer').on 'click', '.image-viewer-item-delete', (e) ->\n    if confirm \"Are you sure you want to delete this item?\"\n      $(e.target).closest('form').ajaxSubmit\n        success: ->\n          $(e.target).closest('.image-viewer-item').hide 500, ->\n            $(e.target).remove()\n          return\n    return\n\n  $('#insert-post-image').on 'click', ->\n    image_viewer_context = 'markdown'\n    show_image_viewer()\n    return\n\n  $('#set-post-image').on 'click', ->\n    image_viewer_context = 'post-image'\n    show_image_viewer()\n    return\n\n  $('.show-image-viewer').on 'click', ->\n    image_viewer_context = 'dashboard'\n    show_image_viewer()\n    return\n"]}